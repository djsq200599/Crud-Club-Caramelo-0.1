<ion-header>
  <ion-toolbar>
    <ion-grid>
      <ion-row style="display: flex;
      justify-content: space-between">
        <ion-col><ion-button [routerLink]="['/listar']" size="small" color="warning">Atras</ion-button></ion-col>
        <ion-col  style="color: rgb(177, 121, 0); font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: large; text-align: center;">Club Caramelo <ion-icon name="beer"></ion-icon></ion-col>
        <ion-col style="display: flex;
        flex-direction: row-reverse;"><ion-button [routerLink]="['/listar-carrito']" size="small" color="warning">Reserva</ion-button></ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card *ngIf="autoActivo"
  [id]="autoActivo.id">
  <ion-img [src]="autoActivo.foto"></ion-img>
    <ion-card-header>
      <ion-card-title>
        {{ autoActivo.nombre }}
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <br>
      <ion-card-subtitle>Ubicacion: {{ autoActivo.ubicacion }}</ion-card-subtitle>
      <ion-card-subtitle>Tematica: {{ autoActivo.tematica }}</ion-card-subtitle>
      <ion-card-subtitle>Capacidad: {{ caplocal?.cantidad }}/{{ caplocal?.capacidad }} (En el local/maxima)</ion-card-subtitle>
      <ion-card-subtitle>Precio: {{ autoActivo.precio | currency: 'CLP' }}</ion-card-subtitle>
      <br>
      <ion-grid>
        <ion-row>
          <ion-col></ion-col>
          <ion-col><ion-button color="warning" (click)="addCart(autoActivo)">Agregar Reserva</ion-button></ion-col>
          <ion-col></ion-col>
        </ion-row>
      </ion-grid>
      <p style="color: rgb(177, 121, 0); font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: large; text-align: center ;">Musica <ion-icon name="musical-notes"></ion-icon></p>
      <ion-card *ngFor="let a of musica">
        <div class="card-image-wrapper">
          <img [src]="a.foto" class="card-image" />
        </div>
        <ion-card-header>
          <ion-card-title>{{ a.nombre }}</ion-card-title>
          <ion-card-title>{{ a.detalle }}</ion-card-title>
        </ion-card-header>
      </ion-card>
      <p style="color: rgb(177, 121, 0); font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: large; text-align: center;">Comida <ion-icon name="restaurant"></ion-icon></p>
      <ion-card *ngFor="let a of productos">
        <div class="card-image-wrapper">
          <img [src]="a.foto" class="card-image" />
        </div>
        <ion-card-header>
          <ion-card-title>{{ a.nombre }}</ion-card-title>
          <ion-card-title>{{ a.detalle }}</ion-card-title>
        </ion-card-header>
      </ion-card>
      <p style="color: rgb(177, 121, 0); font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: large; text-align: center;">Calificaciones y Comentarios <ion-icon name="star-half-outline"></ion-icon></p>
      <ion-card>
        <ion-card-header>
          <ion-card-title>Calificar y comentar</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="rating">
            <ion-icon name="star" (click)="rate(1)" [ngClass]="{'filled': rating >= 1}"></ion-icon>
            <ion-icon name="star" (click)="rate(2)" [ngClass]="{'filled': rating >= 2}"></ion-icon>
            <ion-icon name="star" (click)="rate(3)" [ngClass]="{'filled': rating >= 3}"></ion-icon>
            <ion-icon name="star" (click)="rate(4)" [ngClass]="{'filled': rating >= 4}"></ion-icon>
            <ion-icon name="star" (click)="rate(5)" [ngClass]="{'filled': rating >= 5}"></ion-icon>
          </div>
          <ion-item>
            <ion-textarea rows="3" [(ngModel)]="comentario" placeholder="Escribe tu comentario"></ion-textarea>
          </ion-item>
          <ion-button expand="full" (click)="enviarComentario()">Enviar Comentario</ion-button>
        </ion-card-content>
      </ion-card>    

      <ion-card *ngFor="let calificacion of Calificaciones">
        <ion-card-header>
          <div class="rating">
            <ion-icon name="star" [ngClass]="{'filled': calificacion.stars >= 1}"></ion-icon>
            <ion-icon name="star" [ngClass]="{'filled': calificacion.stars >= 1.7}"></ion-icon>
            <ion-icon name="star" [ngClass]="{'filled': calificacion.stars >= 2.7}"></ion-icon>
            <ion-icon name="star" [ngClass]="{'filled': calificacion.stars >= 3.7}"></ion-icon>
            <ion-icon name="star" [ngClass]="{'filled': calificacion.stars >= 4.7}"></ion-icon>
          </div>
        </ion-card-header>
        <ion-card-content>
          <div class="comentario">{{ calificacion.comentario }}</div>
        </ion-card-content>
      </ion-card>
    </ion-card-content>
  </ion-card>
</ion-content>
